import React from "react";
import { useNavigate, useNavigation } from "react-router-dom";
import Backdrop from "@mui/material/Backdrop";
import CircularProgress from "@mui/material/CircularProgress";

export default function KnowledgeBasePage() {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const [backdropOpen, setBackdropOpen] = React.useState(false);

  React.useEffect(() => {
    if (navigation.state === "loading") {
      setBackdropOpen(true); // Keep backdrop open during navigation
    } else if (navigation.state === "idle") {
      setBackdropOpen(false); // Close backdrop after navigation completes
    }
  }, [navigation.state]);

  const handleLinkClick = (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>, to: string) => {
    event.preventDefault(); // Prevent default navigation
    setBackdropOpen(true); // Show backdrop
    navigate(to); // Programmatically navigate after showing the backdrop
  };

  return (
    <div>
      <h1>Knowledge Base Page</h1>
      {/* Example Link */}
      <a href="/some-other-page" onClick={(e) => handleLinkClick(e, "/some-other-page")}>
        Go to Some Other Page
      </a>
      <Backdrop open={backdropOpen} style={{ zIndex: 1000 }}>
        <CircularProgress color="inherit" />
      </Backdrop>
    </div>
  );
}